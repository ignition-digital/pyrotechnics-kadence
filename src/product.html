<!DOCTYPE html>
<html
  lang="en-US"
  class="no-js"
  itemtype="https://schema.org/WebPage"
  itemscope
>
  <head>
    <title>Pyrotechnics</title>
    <%= htmlWebpackPlugin.options.templateParameters.commonHead %>
    <link
      rel="stylesheet"
      id="elementor-post-1186-css"
      href="wp-content/uploads/elementor/css/post-1186.css"
      media="all"
    />
    <script src="data\inventory.js"></script>
    <style>
      .product-images img {
        border: 2px solid #ccc;
        border-radius: 5px;
        padding: 5px;
      }

      .product-images img:hover {
        border-color: #007bff;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      }

      .recommended-product-images {
        display: flex;
        justify-content: space-evenly;
        gap: 10px;
        margin-top: 15px;
        flex-wrap: wrap;
      }

      .product-item {
        flex: 0 1 auto;
        text-align: center;
        max-width: 120px;
      }

      .product-item img {
        width: 100%;
        height: auto;
        cursor: pointer;
      }

      .product-caption {
        font-family: "Jost", Sans-serif;
        font-size: 11px;
        font-weight: 500;
        color: var(--global-palette-highlight);
        margin-top: 8px;
        width: 100%;
        white-space: normal;
        word-wrap: break-word;
        overflow: hidden;
        text-overflow: ellipsis;
      }
    </style>
  </head>
  <body
    class="page-template page-template-elementor_header_footer page page-id-1186 wp-custom-logo wp-embed-responsive footer-on-bottom hide-focus-outline link-style-standard content-title-style-hide content-width-fullwidth content-style-unboxed content-vertical-padding-hide transparent-header mobile-transparent-header kadence-elementor-colors elementor-default elementor-template-full-width elementor-kit-18 elementor-page elementor-page-1186"
  >
    <div id="wrapper" class="site wp-site-blocks">
      <%= htmlWebpackPlugin.options.navbar %>
      <div id="inner-wrap" class="wrap hfeed kt-clear">
        <div
          data-elementor-type="wp-page"
          data-elementor-id="1186"
          class="elementor elementor-1186"
        >
          <section
            class="elementor-section elementor-top-section elementor-element elementor-element-923806a elementor-section-height-min-height elementor-section-boxed elementor-section-height-default elementor-section-items-middle"
            data-id="923806a"
            data-element_type="section"
            data-settings='{"background_background":"classic"}'
          >
            <div class="elementor-background-overlay"></div>
            <div class="elementor-container elementor-column-gap-default">
              <div
                class="elementor-column elementor-col-50 elementor-top-column elementor-element elementor-element-9acb638"
                data-id="9acb638"
                data-element_type="column"
              >
                <div class="elementor-widget-wrap elementor-element-populated">
                  <div
                    class="elementor-element elementor-element-c1579e5 pp-dual-heading-block elementor-widget elementor-widget-pp-dual-heading"
                    data-id="c1579e5"
                    data-element_type="widget"
                    data-widget_type="pp-dual-heading.default"
                  >
                    <div class="elementor-widget-container">
                      <h2 class="pp-dual-heading">
                        <span class="pp-second-text">
                          <span data-translate="detailsPage.banner"></span>
                        </span>
                      </h2>
                    </div>
                  </div>
                  <div
                    class="elementor-element elementor-element-828ffcc elementor-widget elementor-widget-heading"
                    data-id="828ffcc"
                    data-element_type="widget"
                    data-widget_type="heading.default"
                  >
                    <div class="elementor-widget-container">
                      <h4
                        class="elementor-heading-title elementor-size-default"
                        data-translate="detailsPage.breadcrumb"
                      ></h4>
                    </div>
                  </div>
                  <div
                    class="elementor-element elementor-element-2463c78 elementor-widget-divider--view-line elementor-widget elementor-widget-divider"
                    data-id="2463c78"
                    data-element_type="widget"
                    data-widget_type="divider.default"
                  >
                    <div class="elementor-widget-container">
                      <div class="elementor-divider">
                        <span class="elementor-divider-separator"></span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              <div
                class="elementor-column elementor-col-50 elementor-top-column elementor-element elementor-element-9bce905 elementor-hidden-tablet elementor-hidden-mobile"
                data-id="9bce905"
                data-element_type="column"
              >
                <div class="elementor-widget-wrap"></div>
              </div>
            </div>
          </section>
          <section
            class="elementor-section elementor-top-section elementor-element elementor-element-c43fdef elementor-section-boxed elementor-section-height-default elementor-section-height-default"
            data-id="c43fdef"
            data-element_type="section"
            data-settings='{"background_background":"classic"}'
            id="specs"
          >
            <div class="elementor-container elementor-column-gap-default">
              <div
                class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-5b12754c"
                data-id="5b12754c"
                data-element_type="column"
                data-settings='{"background_background":"classic"}'
              >
                <div class="elementor-widget-wrap elementor-element-populated">
                  <section
                    class="elementor-section elementor-inner-section elementor-element elementor-element-31636729 elementor-section-boxed elementor-section-height-default elementor-section-height-default"
                    data-id="31636729"
                    data-element_type="section"
                  >
                    <div
                      class="elementor-container elementor-column-gap-default"
                    >
                      <div
                        class="elementor-column elementor-col-50 elementor-inner-column elementor-element elementor-element-23a68d03 animated-slow elementor-invisible"
                        data-id="23a68d03"
                        data-element_type="column"
                        data-settings='{"animation_tablet":"fadeInLeft","animation":"fadeInLeft","animation_delay":25}'
                      >
                        <div
                          class="elementor-widget-wrap elementor-element-populated"
                        >
                          <div
                            class="elementor-element elementor-element-9e1d4d7 elementor-widget elementor-widget-image"
                            data-id="9e1d4d7"
                            data-element_type="widget"
                            data-widget_type="image.default"
                          >
                            <div class="elementor-widget-container">
                              <div
                                style="
                                  position: relative;
                                  width: 100%;
                                  padding-bottom: 56.25%; /* 16:9 aspect ratio */
                                "
                              >
                                <iframe
                                  id="product-video"
                                  src=""
                                  frameborder="0"
                                  allow="autoplay; encrypted-media"
                                  allowfullscreen
                                  title="Pyrotechnics Video"
                                  style="
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    width: 100%;
                                    height: 100%;
                                    border: none;
                                  "
                                ></iframe>
                                <img
                                  id="placeholder-image"
                                  src="https://public-110924.s3.ap-southeast-1.amazonaws.com/images/video-coming-soon.png"
                                  style="
                                    position: absolute;
                                    top: 0;
                                    left: 0;
                                    width: 100%;
                                    height: 100%;
                                    object-fit: cover;
                                    display: block;
                                  "
                                />
                              </div>

                              <div
                                class="product-images"
                                id="product-images-container"
                                style="
                                  display: flex;
                                  justify-content: space-between;
                                  gap: 10px;
                                  margin-top: 15px;
                                "
                              ></div>

                              <!-- Modal for Enlarge Image -->
                              <!-- Modal for Enlarge Image -->
                              <div
                                id="myModal"
                                style="
                                  display: none;
                                  position: fixed;
                                  z-index: 999;
                                  left: 0;
                                  top: 0;
                                  width: 100%;
                                  height: 100%;
                                  background-color: rgba(0, 0, 0, 0.8);
                                "
                              >
                                <span
                                  onclick="closeModal()"
                                  style="
                                    position: absolute;
                                    top: 20px;
                                    right: 20px;
                                    font-size: 30px;
                                    color: #fff;
                                    cursor: pointer;
                                  "
                                  >&times;</span
                                >
                                <img
                                  id="modal-img"
                                  src=""
                                  alt="Enlarged Image"
                                  style="
                                    max-width: 90%;
                                    max-height: 80%;
                                    margin: auto;
                                    display: block;
                                    opacity: 0;
                                    transition: opacity 0.5s ease-in-out;
                                  "
                                />
                                <button
                                  id="prev-btn"
                                  onclick="navigateImage(-1)"
                                  style="
                                    position: absolute;
                                    top: 50%;
                                    left: 20px;
                                    transform: translateY(-50%);
                                    font-size: 20px;
                                    color: white;
                                    background: rgba(0, 0, 0, 0.5);
                                    border: none;
                                    padding: 10px;
                                    cursor: pointer;
                                  "
                                >
                                  &#10094;
                                  <!-- Left arrow -->
                                </button>
                                <button
                                  id="next-btn"
                                  onclick="navigateImage(1)"
                                  style="
                                    position: absolute;
                                    top: 50%;
                                    right: 20px;
                                    transform: translateY(-50%);
                                    font-size: 20px;
                                    color: white;
                                    background: rgba(0, 0, 0, 0.5);
                                    border: none;
                                    padding: 10px;
                                    cursor: pointer;
                                  "
                                >
                                  &#10095;
                                  <!-- Right arrow -->
                                </button>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div
                        class="elementor-column elementor-col-50 elementor-inner-column elementor-element elementor-element-9de5a51 animated-slow elementor-invisible"
                        data-id="9de5a51"
                        data-element_type="column"
                        data-settings='{"animation_tablet":"fadeInLeft","animation":"fadeInRight","animation_delay":250}'
                      >
                        <div
                          class="elementor-widget-wrap elementor-element-populated"
                        >
                          <div
                            class="elementor-element elementor-element-b9a45d6 elementor-widget elementor-widget-heading"
                            data-id="b9a45d6"
                            data-element_type="widget"
                            data-widget_type="heading.default"
                          >
                            <div class="elementor-widget-container">
                              <h3
                                class="elementor-heading-title elementor-size-default"
                                id="product-title"
                              ></h3>
                            </div>
                          </div>
                          <div
                            class="elementor-element elementor-element-433be32 elementor-widget elementor-widget-text-editor"
                            data-id="433be32"
                            data-element_type="widget"
                            data-widget_type="text-editor.default"
                          >
                            <div class="elementor-widget-container">
                              <ul class="elementor-icon-list-items">
                                <br />
                                <br />

                                <li class="elementor-icon-list-item">
                                  <i id="item-code"> </i> :
                                  <span
                                    class="elementor-icon-list-text"
                                    id="product-item-code"
                                  >
                                  </span>
                                </li>

                                <li class="elementor-icon-list-item">
                                  <i id="category"> </i> :
                                  <span
                                    class="elementor-icon-list-text"
                                    id="product-group"
                                  >
                                  </span>
                                </li>

                                <li class="elementor-icon-list-item">
                                  <i id="packaging"> </i> :
                                  <span
                                    class="elementor-icon-list-text"
                                    id="product-spec"
                                  >
                                  </span>
                                </li>
                              </ul>
                            </div>
                          </div>
                          <div
                            class="elementor-element elementor-element-a42caf1 fluentform-widget-submit-button-custom elementor-widget elementor-widget-elementskit-fluent-forms"
                            data-id="a42caf1"
                            data-element_type="widget"
                            data-widget_type="elementskit-fluent-forms.default"
                          >
                            <div class="elementor-widget-container">
                              <div class="ekit-wid-con">
                                <div
                                  class="fluentform-widget-wrapper hide-fluent-form-labels fluentform-widget-align-default"
                                ></div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </section>
                </div>
              </div>
            </div>
          </section>

          <section
            class="elementor-section elementor-top-section elementor-element elementor-element-cab73d6 elementor-section-boxed elementor-section-height-default elementor-section-height-default"
            data-id="cab73d6"
            data-element_type="section"
          >
            <div class="elementor-container elementor-column-gap-default">
              <div
                class="elementor-column elementor-col-100 elementor-top-column elementor-element elementor-element-efe157f"
                data-id="efe157f"
                data-element_type="column"
              >
                <div class="elementor-widget-wrap elementor-element-populated">
                  <div
                    class="elementor-element elementor-element-487847e elementor-widget-divider--view-line elementor-widget elementor-widget-divider"
                    data-id="487847e"
                    data-element_type="widget"
                    data-widget_type="divider.default"
                  >
                    <h4
                      style="text-align: center"
                      class="elementor-heading-title elementor-size-default"
                      data-translate="productPage.related_products"
                    ></h4>
                    <br />
                    <div class="elementor-widget-container">
                      <div class="elementor-divider">
                        <span class="elementor-divider-separator"></span>
                      </div>

                      <div class="recommended-product-images"></div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </div>

        <%= htmlWebpackPlugin.options.footer %>
        <script id="fluent-form-submission-js-extra">
          var fluentFormVars = {
            ajaxUrl: "index.html",
            forms: [],
            step_text: "Step %activeStep% of %totalStep% - %stepTitle%",
            is_rtl: "",
            date_i18n: {
              previousMonth: "Previous Month",
              nextMonth: "Next Month",
              months: {
                shorthand: [
                  "Jan",
                  "Feb",
                  "Mar",
                  "Apr",
                  "May",
                  "Jun",
                  "Jul",
                  "Aug",
                  "Sep",
                  "Oct",
                  "Nov",
                  "Dec",
                ],
                longhand: [
                  "January",
                  "February",
                  "March",
                  "April",
                  "May",
                  "June",
                  "July",
                  "August",
                  "September",
                  "October",
                  "November",
                  "December",
                ],
              },
              weekdays: {
                longhand: [
                  "Sunday",
                  "Monday",
                  "Tuesday",
                  "Wednesday",
                  "Thursday",
                  "Friday",
                  "Saturday",
                ],
                shorthand: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
              },
              daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
              rangeSeparator: " to ",
              weekAbbreviation: "Wk",
              scrollTitle: "Scroll to increment",
              toggleTitle: "Click to toggle",
              amPM: ["AM", "PM"],
              yearAriaLabel: "Year",
              firstDayOfWeek: 1,
            },
            pro_version: "",
            fluentform_version: "5.2.0",
            force_init: "",
            stepAnimationDuration: "350",
            upload_completed_txt: "100% Completed",
            upload_start_txt: "0% Completed",
            uploading_txt: "Uploading",
            choice_js_vars: {
              noResultsText: "No results found",
              loadingText: "Loading...",
              noChoicesText: "No choices to choose from",
              itemSelectText: "Press to select",
              maxItemText: "Only %%maxItemCount%% options can be added",
            },
            input_mask_vars: {
              clearIfNotMatch: false,
            },
          };
          var fluentFormVars = {
            ajaxUrl: "index.html",
            forms: [],
            step_text: "Step %activeStep% of %totalStep% - %stepTitle%",
            is_rtl: "",
            date_i18n: {
              previousMonth: "Previous Month",
              nextMonth: "Next Month",
              months: {
                shorthand: [
                  "Jan",
                  "Feb",
                  "Mar",
                  "Apr",
                  "May",
                  "Jun",
                  "Jul",
                  "Aug",
                  "Sep",
                  "Oct",
                  "Nov",
                  "Dec",
                ],
                longhand: [
                  "January",
                  "February",
                  "March",
                  "April",
                  "May",
                  "June",
                  "July",
                  "August",
                  "September",
                  "October",
                  "November",
                  "December",
                ],
              },
              weekdays: {
                longhand: [
                  "Sunday",
                  "Monday",
                  "Tuesday",
                  "Wednesday",
                  "Thursday",
                  "Friday",
                  "Saturday",
                ],
                shorthand: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
              },
              daysInMonth: [31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31],
              rangeSeparator: " to ",
              weekAbbreviation: "Wk",
              scrollTitle: "Scroll to increment",
              toggleTitle: "Click to toggle",
              amPM: ["AM", "PM"],
              yearAriaLabel: "Year",
              firstDayOfWeek: 1,
            },
            pro_version: "",
            fluentform_version: "5.2.0",
            force_init: "",
            stepAnimationDuration: "350",
            upload_completed_txt: "100% Completed",
            upload_start_txt: "0% Completed",
            uploading_txt: "Uploading",
            choice_js_vars: {
              noResultsText: "No results found",
              loadingText: "Loading...",
              noChoicesText: "No choices to choose from",
              itemSelectText: "Press to select",
              maxItemText: "Only %%maxItemCount%% options can be added",
            },
            input_mask_vars: {
              clearIfNotMatch: false,
            },
          };
        </script>
        <script
          src="wp-content/plugins/fluentform/assets/js/form-submission.js"
          id="fluent-form-submission-js"
        ></script>
        <script id="elementskit-elementor-js-extra">
          var ekit_config = {
            ajaxurl: "index.html",
            nonce: "85cbdc0748",
          };
        </script>
        <script
          src="wp-content/plugins/elementskit-lite/widgets/init/assets/js/elementor.js"
          id="elementskit-elementor-js"
        ></script>
        <script>
          (function () {
            function c() {
              var b = a.contentDocument || a.contentWindow.document;
              if (b) {
                var d = b.createElement("script");
                d.innerHTML =
                  "window.__CF$cv$params={r:'8bec82d43e282f03',t:'MTcyNTYwNTI4Mi4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='wp-content/plugins/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";
                b.getElementsByTagName("head")[0].appendChild(d);
              }
            }
            if (document.body) {
              var a = document.createElement("iframe");
              a.height = 1;
              a.width = 1;
              a.style.position = "absolute";
              a.style.top = 0;
              a.style.left = 0;
              a.style.border = "none";
              a.style.visibility = "hidden";
              document.body.appendChild(a);
              if ("loading" !== document.readyState) c();
              else if (window.addEventListener)
                document.addEventListener("DOMContentLoaded", c);
              else {
                var e = document.onreadystatechange || function () {};
                document.onreadystatechange = function (b) {
                  e(b);
                  "loading" !== document.readyState &&
                    ((document.onreadystatechange = e), c());
                };
              }
            }
          })();
        </script>
      </div>
    </div>

    <script>
      let currentIndex = 0;
      let imageUrls = [];
      function openModal(img) {
        const modal = document.getElementById("myModal");
        const modalImg = document.getElementById("modal-img");
        imageUrls = Array.from(
          document.querySelectorAll("#product-images-container img")
        ).map((img) => img.getAttribute("data-large"));
        currentIndex = imageUrls.indexOf(img.getAttribute("data-large"));
        modalImg.src = imageUrls[currentIndex];
        modal.style.display = "block";
        modalImg.style.opacity = 1;
      }

      function navigateImage(direction) {
        const modalImg = document.getElementById("modal-img");
        currentIndex =
          (currentIndex + direction + imageUrls.length) % imageUrls.length;

        modalImg.style.opacity = 0;
        setTimeout(() => {
          modalImg.src = imageUrls[currentIndex];
          modalImg.style.opacity = 1;
        }, 300);
      }

      function closeModal() {
        const modal = document.getElementById("myModal");
        const modalImg = document.getElementById("modal-img");

        modalImg.style.opacity = 0;
        setTimeout(() => {
          modal.style.display = "none";
        }, 300);
      }
    </script>
    <script>
      const labels = {
        itemCode: { en: "Item Code", zh: "项目代码" },
        category: { en: "Category", zh: "类别" },
        packaging: { en: "Packaging", zh: "包装" },
      };
      const groupMappings = {
        "firecracker-series": {
          en: "Firecracker Series",
          zh: "红炮，鞭炮系列",
        },
        "fireworks-series": { en: "Fireworks Series", zh: "烟花，盆花系列" },
        "throwing-series": { en: "Throwing Series", zh: "投掷系列" },
        "handheld-series": { en: "Handheld Series", zh: "手持系列" },
        "fountain-series": { en: "Fountain Series", zh: "喷泉系列" },
        "flying-series": { en: "Flying Series", zh: "飞天系列" },
      };

      const productImagesContainer = document.getElementById(
        "product-images-container"
      );
      const productTitle = document.getElementById("product-title");
      const productSpec = document.getElementById("product-spec");
      const productCode = document.getElementById("product-item-code");
      const productGroup = document.getElementById("product-group");
      const productVideo = document.getElementById("product-video");
      const placeholderImage = document.getElementById("placeholder-image");

      const defaultImage =
        "https://public-110924.s3.ap-southeast-1.amazonaws.com/images/product-placeholder2.webp";
      const urlParams = new URLSearchParams(window.location.search);

      const currentProduct = window.inventoryProducts.find(
        (product) => String(product.id) === urlParams.get("id")
      );

      if (currentProduct.video_url) {
        productVideo.src = currentProduct.video_url;
        placeholderImage.style.display = "none";
      } else {
        productVideo.style.display = "none";
      }

      if (currentProduct.image_urls.length === 1) {
        productImagesContainer.style.justifyContent = "center";
      } else if (currentProduct.image_urls.length === 2) {
        productImagesContainer.style.justifyContent = "space-evenly";
      } else {
        productImagesContainer.style.justifyContent = "space-between";
      }

      currentProduct.image_urls.forEach((imageUrl, index) => {
        const productItem = document.createElement("div");
        productItem.classList.add("product-item");
        productItem.style.flex = "0 1 auto";

        const imgElement = document.createElement("img");
        imgElement.src = imageUrl;
        imgElement.id = `product-image-${index + 1}`;
        imgElement.setAttribute("data-large", imageUrl);
        imgElement.width = 120;
        imgElement.height = 120;
        imgElement.style.width = "120px";
        imgElement.style.height = "120px";
        imgElement.style.cursor = "pointer";
        imgElement.setAttribute("onclick", "openModal(this);");
        productItem.appendChild(imgElement);
        productImagesContainer.appendChild(productItem);
      });

      const savedLanguage = localStorage.getItem("selectedLanguage");
      productTitle.textContent =
        savedLanguage === "zh"
          ? currentProduct.chinese
          : currentProduct.english;
      productSpec.textContent = currentProduct.packaging;
      productCode.textContent = currentProduct.sku;
      productGroup.textContent =
        savedLanguage === "zh"
          ? groupMappings[currentProduct.group].zh
          : groupMappings[currentProduct.group].en;

      document.getElementById("item-code").textContent = `${
        savedLanguage === "zh" ? labels.itemCode.zh : labels.itemCode.en
      }`;

      document.getElementById("category").textContent = `${
        savedLanguage === "zh" ? labels.category.zh : labels.category.en
      }`;

      document.getElementById("packaging").textContent = `${
        savedLanguage === "zh" ? labels.packaging.zh : labels.packaging.en
      }`;

      function populateRandomProducts(currentProduct, inventoryProducts) {
        const sameGroupProducts = inventoryProducts.filter(
          (product) =>
            product.group === currentProduct.group &&
            product.id !== currentProduct.id
        );
        const shuffledProducts = sameGroupProducts.sort(
          () => Math.random() - 0.5
        );
        const selectedProducts = shuffledProducts.slice(0, 5);
        const recommendedImagesContainer = document.querySelector(
          ".recommended-product-images"
        );
        recommendedImagesContainer.innerHTML = "";
        selectedProducts.forEach((product) => {
          const productItem = document.createElement("div");
          productItem.className = "product-item";
          const productImage = document.createElement("img");
          productImage.src =
            product.image_urls && product.image_urls[0]
              ? product.image_urls[0]
              : defaultImage;
          productImage.alt = product.english;
          productImage.style.cursor = "pointer";
          const productCaption = document.createElement("div");
          productCaption.className = "product-caption";
          productCaption.textContent =
            savedLanguage === "zh" ? product.chinese : product.english;
          const productLink = document.createElement("a");
          productLink.href = `javascript:void(0)`;
          productLink.addEventListener("click", function () {
            window.location.href = `/<%= roots %>/product.html?id=${product.id}#specs`;
          });
          productItem.appendChild(productImage);
          productItem.appendChild(productCaption);
          productLink.appendChild(productItem);
          recommendedImagesContainer.appendChild(productLink);
        });
      }
      populateRandomProducts(currentProduct, window.inventoryProducts);
    </script>
  </body>
</html>
